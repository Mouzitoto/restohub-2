# Шаг 4.5: Этажи

## Описание
Интерфейс для управления этажами ресторана.

## Задачи

### 1. Страница управления этажами

#### 1.1. Компонент FloorsPage
**Маршрут:** `/floors` (защищенный)

**Структура:**
- Заголовок: "Этажи"
- Кнопка "Добавить этаж"
- Список этажей (сортировка по `floorNumber`)

#### 1.2. Список этажей
**Отображение:**
- Таблица
- Для каждого этажа:
  - Номер этажа
  - Количество залов на этаже (из поля `roomsCount` в ответе API)
  - Кнопки: "Редактировать", "Удалить"

**Логика загрузки:**
- GET запрос на `/admin-api/r/:id/floor?sortBy=floorNumber&sortOrder=asc`
- Отобразить поле `roomsCount` из ответа API

#### 1.3. Форма создания/редактирования
**Модальное окно:** FloorFormModal

**Поля:**
```typescript
interface FloorForm {
  floorNumber: string;  // required, max 50, примеры: "1", "Крыша", "Подвал", "Веранда", "1Б"
}
```

**Валидация:**
- Обязательное поле
- Текстовое поле, максимальная длина: 50 символов
- Не может быть пустой строкой (после trim)
- Уникальность в рамках ресторана (проверка на сервере)

**Логика:**
- POST `/admin-api/r/:id/floor` (создание)
- PUT `/admin-api/r/:id/floor/:floorId` (редактирование)

#### 1.4. Удаление этажа
**Процесс:**
1. При загрузке списка этажей:
   - Для каждого этажа отображается количество залов (`roomsCount` из API)
   - Если `roomsCount > 0`, кнопка "Удалить" неактивна (disabled) или скрыта
   - Визуальная индикация: иконка/тултип "Нельзя удалить: на этаже есть активные залы"
2. При клике на "Удалить" (если кнопка активна):
   - Показать модальное окно подтверждения:
     - Заголовок: "Удалить этаж?"
     - Текст: "Вы уверены, что хотите удалить этаж '{floorNumber}'?"
     - Кнопки: "Отмена" и "Удалить"
3. При подтверждении:
   - Показать индикатор загрузки
   - Отправить DELETE запрос на `/admin-api/r/:id/floor/:floorId`
4. Обработка ответа:
   - **Успех (204 No Content)**:
     - Закрыть модальное окно
     - Удалить этаж из списка
     - Показать уведомление "Этаж удален"
   - **Ошибка (400 Bad Request)**:
     - Показать сообщение "Нельзя удалить этаж: на этаже есть активные залы"
     - Закрыть модальное окно
   - **Ошибка (404 Not Found)**:
     - Показать сообщение "Этаж не найден"
   - **Ошибка (403 Forbidden)**:
     - Показать сообщение "Нет доступа"

### 2. Интеграция с API
- `GET /admin-api/r/:id/floor` - список
- `POST /admin-api/r/:id/floor` - создание
- `GET /admin-api/r/:id/floor/:floorId` - получение
- `PUT /admin-api/r/:id/floor/:floorId` - обновление
- `DELETE /admin-api/r/:id/floor/:floorId` - удаление

## Результаты выполнения шага

По итогу выполнения этого шага должны быть созданы следующие артефакты и выполнены следующие проверки:

### Созданные компоненты:
1. ✅ Страница этажей:
   - Список этажей
   - Форма создания/редактирования

2. ✅ Интеграция с API:
   - Запросы к `/admin-api/r/:id/floor`
   - Обработка ответов
   - Обработка ошибок

### Функциональные проверки:
1. ✅ CRUD операции работают:
   - Создание этажа
   - Редактирование этажа
   - Удаление этажа

### Критерии готовности:
- ✅ Все компоненты созданы и работают
- ✅ Интеграция с API работает
- ✅ Валидация работает
- ✅ Все функциональные проверки пройдены успешно

**Шаг считается выполненным**, когда все компоненты работают и все функциональные проверки пройдены успешно.

