# Шаг 6.3: Бронирование

## Описание
Реализация формы бронирования стола с генерацией сообщения для WhatsApp.

## Задачи

### 1. Форма бронирования
- Поля формы:
  - Выбор стола (dropdown или выбор из карты столов)
  - Дата бронирования (date picker)
  - Время бронирования (time picker)
  - Количество персон (number input с валидацией)
  - "Свое имя" (text input, опционально, max 255) - имя клиента, который делает бронирование
  - "На чье имя бронировать" (text input, опционально, max 255) - имя, на которое делается бронирование (может отличаться от "своего имени")
  - Особые пожелания (textarea, опционально, max 10000)
  - Предзаказ блюд (опционально):
    - Список доступных блюд из меню ресторана
    - Выбор блюд с указанием количества
    - Особые пожелания к каждому блюду (опционально)
- **Важно**: Номер телефона НЕ запрашивается в форме
- Валидация всех полей:
  - Обязательные поля (стол, дата, время, количество персон)
  - "Свое имя" и "На чье имя бронировать" - опциональные, max 255 символов
  - Минимальное/максимальное количество персон (соответствие столу)
  - Дата не в прошлом
  - Время не в прошлом (если выбрана сегодняшняя дата)

### 2. Интеграция с выбором стола
- Возможность начать бронирование:
  - С карты столов (кнопка "Забронировать" на столе)
  - Из формы на странице ресторана
- Предзаполнение ID стола при переходе с карты
- Отображение информации о выбранном столе в форме

### 3. Отправка запроса на API
- POST запрос к `/client-api/r/:id/booking`
- Отображение loading state при отправке
- Обработка успешного ответа
- Обработка ошибок валидации
- Отображение ошибок пользователю

### 4. Переход в WhatsApp для подтверждения
- Получение WhatsApp ссылки из API после создания бронирования
- Отображение инструкции для клиента:
  - "Для завершения бронирования отправьте сообщение в WhatsApp"
  - Кнопка "Открыть WhatsApp"
  - Информация о том, что номер телефона будет определен автоматически
- Автоматическое открытие WhatsApp при клике на кнопку
- Редирект на WhatsApp с предзаполненным текстом (BOOKING:1) - booking_id из ответа API
- Инструкция: "Нажмите 'Отправить' в WhatsApp для подтверждения бронирования"

### 5. UX улучшения
- Модальное окно для формы (опционально)
- Пошаговая форма (wizard) для лучшего UX (опционально)
- Сохранение данных формы в localStorage (опционально)
- Информационное сообщение о процессе:
  - "После отправки сообщения в WhatsApp менеджер ресторана свяжется с вами для подтверждения"
- Сообщение об успешном создании бронирования
- Отображение статуса бронирования (если реализовано отслеживание)

### 6. Интеграция с календарем
- Отображение доступных временных слотов (если реализовано)
- Блокировка определенных дат/времени (опционально)
- Выбор удобного времени из предложенных вариантов (опционально)

### 7. Мобильная оптимизация
- Адаптивная форма
- Touch-friendly элементы (большие кнопки, удобные инпуты)
- Автоматический переход на WhatsApp на мобильных устройствах

